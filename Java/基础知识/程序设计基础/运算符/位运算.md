# 位运算

---

Java支持的位运算符有如下7个：

- &：与
- |：或
- ~：非
- ^：异或
- <<：左位移。将运算数的二进制码整体左移指定的位数，左移后右侧空缺**<u>以0填充</u>**。
- \>>：右位移。将运算数的二进制码整体右移指定的位置，右移后左侧空缺<u>**以原来的符号位填充**</u>，即如果操作数为正数，以0填充，如果操作数为负数，以1填充。
- \>>>：无符号右位移。将运算数的二进制码整体右移指定的位置，右移后左侧空缺**<u>以0填充</u>**。

| 操作数1 | 操作数2 | 与操作 | 或操作 | 异或操作 |
| :-----: | :-----: | :----: | :----: | :------: |
|    0    |    0    |   0    |   0    |    0     |
|    0    |    1    |   0    |   1    |    1     |
|    1    |    0    |   0    |   1    |    1     |
|    1    |    1    |   1    |   1    |    0     |

注意：

1. 位运算的结果为int类型（32位）

2. 负数在计算机中以补码表示：将原码<font color = red>**除了符号位**</font>全部取反，得到反码，将反码加1，得到补码。

    ```java
    // 符号位
    //   1 0000000000000000000000000000101 -5原码
    //   1 1111111111111111111111111111010 -5反码
    //   1 1111111111111111111111111111011 -5补码
    ```

示例：

1. -5 & 9 = 9

    ```java
    //   1 1111111111111111111111111111011 -5补码
    //   0 0000000000000000000000000001001  9原码
    //   0 0000000000000000000000000001001  运算结果
    ```

2. -5 | 9 = -5

    ```java
    //   1 1111111111111111111111111111011 -5补码
    //   0 0000000000000000000000000001001  9原码
    //   1 1111111111111111111111111111011  运算结果（补码）
    //   1 1111111111111111111111111111010  运算结果（反码）
    //   1 0000000000000000000000000000101  运算结果（原码）
    ```

3. ~5 = -6，~ -5 = 4

    ```java
    //   0 0000000000000000000000000000101  5原码
    //   1 1111111111111111111111111111010  运算结果（补码）
    //   1 1111111111111111111111111111001  运算结果（反码）
    //   1 0000000000000000000000000000110  运算结果（原码）
    ```

    ```java
    //   1 1111111111111111111111111111011  -5补码
    //   0 0000000000000000000000000000100  运算结果
    ```

4. 5 ^ -5 = -1

    ```java
    //   0 0000000000000000000000000000101  5原码
    //   1 1111111111111111111111111111011 -5补码
    //   1 1111111111111111111111111111110  运算结果（补码）
    //   1 1111111111111111111111111111101  运算结果（反码） 
    //   1 0000000000000000000000000000010  运算结果（原码）
    ```

5. 5 << 2 = 20，-5 << 2 = -20

    ```java
    //    0 0000000000000000000000000000101  5原码
    // 00 0 00000000000000000000000000101    左移
    //    0 0000000000000000000000000010100  截断，填充
    ```

    ```java
    //    1 1111111111111111111111111111011  -5补码
    // 11 1 11111111111111111111111111011    左移
    //    1 1111111111111111111111111101100  截断，填充（补码）
    //    1 1111111111111111111111111101011          （反码）
    //    1 0000000000000000000000000010100          （原码）
    ```

6. 5 >> 2 = 1，-5 >> 2 = -2

    ```java
    //    0 0000000000000000000000000000101    5原码
    //       000000000000000000000000000001 01 右移
    //    0 0000000000000000000000000000001    截断，填充
    ```

    ```java
    //    1 1111111111111111111111111111011     -5补码
    //       111111111111111111111111111110 11  右移
    //    1 1111111111111111111111111111110     截断，填充（补码）
    //    1 1111111111111111111111111111101             （反码）
    //    1 0000000000000000000000000000010             （原码）
    ```

7. 5 >>> 2 = 1，-5 >>> 2 = 1073741822

    ```java
    //    0 0000000000000000000000000000101    5原码
    //       000000000000000000000000000001 01 右移
    //    0 0000000000000000000000000000001    截断，填充
    ```

    ```java
    //    1 1111111111111111111111111111011     -5补码
    //       111111111111111111111111111110 11  右移
    //    0 0111111111111111111111111111110     截断，填充
    ```

---

