# 数据库事务

---

```mermaid
graph LR
aAccount[A账户]
bAccount[B账户]
aAccount--10000元-->bAccount
```

```pseudocode
T转账：
    read(A);
    A = A - 10000;
    write(A);
    read(B)；
    B = B + 10000;
    write(B);
```

通常，从数据库用户的观点看，数据库中的一些操作被认为是一个独立单元，例如，账户A、B之间的一次转账；而在数据库系统中，这些操作是由多个数据库操作组成的。

数据库事务（transaction）是访问并可能操作各种数据项的一个**数据库操作序列**。

## ACID 特性

- 原子性（Atomicity）：事务中包含的所有数据库操作在数据库中要么全部正确反映出来，要么完全不反映。事务中包含的所有数据库操作是不可分割的，要么全部执行，要么全部不执行。
- 一致性（Consistency）：几个并行执行的事务，其执行结果必须与按某一顺序串行执行的结果相一致。
- 隔离性（Isolation）：事务的执行不受其他事务的干扰，事务执行的中间结果对其他事务必须是透明的。
- 持久性（Durability）：对于已经提交的事务，系统必须保证该事务对数据库的改变不被丢失，即使数据库出现故障。